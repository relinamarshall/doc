---
description: >-
  Find命令功能是根据给定的路径和条件查找相关文件或目录，参数灵活方便，支持正则表达式，结合管道符能够实现复杂的功能；但对于服务器负载较高的情况，建议不要在高峰时期使用find命令的模糊搜索，会相对消耗较多的系统资源
layout:
  title:
    visible: true
  description:
    visible: true
  tableOfContents:
    visible: true
  outline:
    visible: true
  pagination:
    visible: true
---

# FIND

#### 操作符 <a href="#ed4ad0f9" id="ed4ad0f9"></a>

| 操作符     | 使用                                      | 说明(以优先级从大到小排序)                |
| ------- | --------------------------------------- | ----------------------------- |
| ( )     | **(** Expr **)**                        | 提升优先级                         |
| ! ，-not | **!** Expr，**-not** Expr                | 非操作                           |
| -a，-and | Expr1 **-a** Expr2，Expr1 **-and** Expr2 | 短路与，前者为flase，后者不会执行，**默认连接符** |
| -o，-or  | Expr1 **-o** Expr2，Expr1 **-or** Expr2  | 短路或，前者为true，后者不会执行            |
| ,       | Expr1 **,** Expr2                       | 表达式都会执行，返回值由后者决定              |

#### 选项 <a href="#ea15ae2b" id="ea15ae2b"></a>

**-daystart**

设置开始时间以午夜凌晨为基准计算时间； 默认情况下，`find`命令使用的是从当前时间起的过去24小时内的时间范围，与`-atime`、`-mtime`、`-ctime`一起使用

**-follow**

用于在遍历文件系统时跟踪符号链接所指向的文件或目录，并在搜索过程中进入链接所指向的目标文件或目录；注意：请确保目标文件系统没有循环链接，以免陷入无限循环

**-regextype**

用于指定正则表达式引擎的类型

* `posix-egrep`：使用 POSIX 扩展正则表达式引擎
* `posix-extended`：使用 POSIX 扩展正则表达式引擎，与`posix-egrep`相同
* `posix-basic`：使用 POSIX 基本正则表达式引擎
* `emacs`：使用 Emacs 正则表达式引擎
* `gnu-awk`：使用 GNU Awk 正则表达式引擎

**-depth**

指定`find`命令在搜索文件时以深度优先的方式进行。深度优先搜索意味着`find`命令首先进入子目录并搜索其中的文件，然后再返回到父目录继续搜索

默认情况下，`find`命令使用广度优先搜索，即先搜索当前目录下的所有文件，然后再进入子目录进行搜索

深度优先搜索的一个常见用途是在删除文件时，可以先删除子目录中的文件，然后再删除父目录。这样可以确保在删除目录时不会遗漏任何文件

**-help，--help**

命令的文档，列出 find 的命令行用法的概要，然后退出

**-maxdepth levels**

用于限制`find`命令的递归深度，即指定搜索的最大层级深度

**-mindepth levels**

指定搜索的最小深度

**-mount，-xdev**

mount一些版本没有，代替使用xdev

用于在指定的目录中查找文件，但不跨越不同的文件系统边界； 只搜索起始目录所在的文件系统，而不会跨越挂载点进入其他文件系统；这在需要限制搜索范围时非常有用，尤其是在搜索大型文件系统时，可以节省时间和资源

**-noleaf**

用于在搜索文件时不假设文件系统的目录结构是完整的；通常情况下，`find`命令会假设文件系统的目录结构是完整的，这样可以优化搜索过程；但在某些情况下，文件系统的目录结构可能不完整，这时可以使用`-noleaf`选项来强制`find`命令搜索整个文件系统；使用`find -noleaf`命令可能会导致搜索速度变慢，因为它需要遍历整个文件系统来搜索文件；例如当文件系统出现损坏或目录结构不完整时可以使用

注意，`-noleaf`选项在不同的`find`版本中可能具有不同的行为

**-version，--version**

打印find的版本号然后退出

**-xautofs**

自动挂载（autofs）是一种特定的文件系统挂载方法，它在需要访问时才会自动挂载，而在不使用时则会自动卸载；使用 -xautofs 选项可以告诉 find 命令在搜索文件时跳过自动挂载的文件系统，仅搜索已经挂载的文件系统

**-ignore\_readdir\_race**

现在好多版本没有一下两个命令了，已经不需要处理多进程访问问题了；用于在搜索文件时忽略 `readdir race` 错误；当多个进程同时访问同一个目录时，可能会发生 `readdir race` 错误

**-noignore\_readdir\_race**

搜索文件时不忽略 `readdir race` 错误

#### 测试 <a href="#db06c78d" id="db06c78d"></a>

| 数字参数(n) | 含义    |
| ------- | ----- |
| +n      | 比 n 大 |
| -n      | 比 n 小 |
| n       | 正好是 n |

| 歧义  | 说明                 |
| --- | ------------------ |
| 访问过 | 指文件被打开访问过          |
| 更改过 | 指文件状态的更改(如权限,所有权等) |
| 修改过 | 指文件内容的修改           |

**-amin \[+-]n**

查找在**n分钟**被**访问过**的文件

**-cmin \[+-]n**

查找在**n分钟**被**更改过**的文件

**-mmin \[+-]n**

查找在**n分钟**被**修改过**的文件

**-atime \[+-]n**

查找在n**天**被**访问过**的文件

**-ctime \[+-]n**

查找在n**天**被**更改过**的文件

**-mtime \[+-]n**

查找在n**天**被**修改过**的文件

**-used \[+-]n**

查找在n天被**访问过**的文件

**-size \[+-]n\[cwbkMG]**

查找文件大小为n单位的文件

| 选项 | 说明     |
| -- | ------ |
| c  | 1字节    |
| w  | 2字节    |
| b  | 512 字节 |
| k  | 1KB    |
| M  | 1MB    |
| G  | 1GB    |

**-anewer file**

查找比文件file**更近**被**访问过**的文件

**-cnewer file**

查找比文件file**更近**被**更改过**的文件

**-newer file**

查找比文件file**更近**被**修改过**的文件

**-fstype type**

查找指定类型的文件系统类型：local(本地文件系统)，nfs(NFS 文件系统)

**-gid n**

查找属于指定组ID的文件

**-group gname**

查找属于指定组名的文件

**-name pattern**

查找文件名匹配模式pattern的文件，区分大小写

**-iname pattern**

类似于-name，但是不区分大小写

**-lname pattern**

查找符号链接名匹配模式pattern的文件

**-ilname pattern**

类似于-lname，但是不区分大小写

**-inum n**

查找inode号为n的文件

inode 号是文件系统中文件的唯一标识符，可以用来查找特定的文件 `ls -i`查看inode

**-path pattern**

查找路径名匹配模式pattern的文件

**-ipath pattern**

类似于-path，但是不区分大小写

**-iregex pattern**

类似于-regex，但是不区分大小写

**-links \[+-]n**

查找硬链接数为n的文件；硬链接是指多个文件名指向同一个文件的情况，每个文件名都是该文件的硬链接；硬链接数表示有多少个文件名指向同一个文件

**-nouser**

查找属主不存在的文件；可能是由于用户被删除而导致的；使用该选项可以帮助你找到这些文件并进行进一步处理

**-nogroup**

查找属组不存在的文件

**-perm mode**

查找文件权限精确匹配mode的文件；查找所有权限设置为 `mode` 的文件或目录

`mode` 是一个三位数的八进制数，每一位表示一种权限

第**一**位表示**所有者的权限**，第**二**位表示**所属组的权限**，第**三**位表示**其他用户的权限**

每一位的数值可以是 **0(无权限)**、**1(执行权限)**、\*\*2(写权限)\*\*或 **4(读权限)**

```
# 若查找所有者和所属组有读写权限、其他用户没有任何权限的文件
find -perm 660
```

**-perm -mode**

查找文件权限包含mode的文件

**-perm +mode**

查找文件权限包含任意mode中的一个或多个的文件

**-regex pattern**

查找文件名匹配正则表达式pattern的文件

**-readable**

查找当前用户有读权限的所有文件或目录

**-writable**

查找当前用户有写权限的所有文件或目录

**-executable**

查找当前用户有执行权限的所有文件或目录

**-type c**

查找指定类型的文件

**-xtype c**

类似于-type，但是也包括符号链接指向的文件类型

| 选项 | 说明     |
| -- | ------ |
| f  | 普通文件   |
| d  | 目录     |
| l  | 符号链接   |
| s  | 套接字文件  |
| p  | 命名管道   |
| b  | 块设备文件  |
| c  | 字符设备文件 |

**-uid n**

查找属主ID为n的文件`id -g`查看属主ID

**-user uname**

查找属主为指定用户名的文件 `whoami` `id -u -n`查看用户名

**-empty**

查找空文件或空目录

**-true**

始终返回true，匹配所有文件

**-false**

始终返回false，不匹配任何文件

#### 动作 <a href="#c500cfab" id="c500cfab"></a>

**-delete**

删除匹配到的文件或目录；注意，该选项会直接删除文件，不会将其放入垃圾桶中，使用时请谨慎

**-exec command ;**

选项会在每个搜索到的文件上单独执行一次命令，注意命令必须以 **;** 结尾

```
# 以下命令会将搜索到的每个文件复制到 /path/to/dest/ 目录下
find /path/to/search -type f -exec cp {} /path/to/dest/ \;
```

**-exec command {} +**

将多个搜索到的文件作为参数传递给一次命令执行，注意命令必须以`+`结尾

注意，`-exec command {} +` 选项要求命令能够接受多个文件作为参数，因此不能使用一些只能接受一个文件名作为参数的命令，例如 `cp` 命令

```
# 以下命令会将搜索到的所有文件打包成一个压缩文件
find /path/to/search -type f -exec tar -czvf archive.tar.gz {} +
```

**-execdir command ;**

与`-exec`选项类似，但命令会在匹配到的每个目录中执行

**-execdir command {} +**

与`-exec`选项类似，但命令会在匹配到的每个目录中执行，并将多个搜索到的文件作为参数传递给一次命令执行，注意命令必须以`+`结尾

**-fls file**

将匹配到的文件或目录的详细信息输出到指定的文件中

**-fprint file**

将匹配到的文件或目录名输出到指定的文件中

**-fprint0 file**

将匹配到的文件或目录名以null字符分隔，并输出到指定的文件中

**-fprintf file format**

将匹配到的文件或目录信息按照指定的格式输出到指定的文件中

**`-ok command ;`**

与`-exec`选项类似，但在执行命令前会询问用户是否执行该命令

**-okdir command ;**

与`-ok`选项类似，但命令会在匹配到的每个目录中执行

**-print**

将匹配到的文件或目录名输出到标准输出中

**-print0**

将匹配到的文件或目录名以null字符分隔，合并匹配项不换行

**-printf format**

按照指定的格式输出匹配到的文件或目录信息，格式可以包含各种占位符，例如`%p`表示文件或目录的完整路径，`%s`表示文件大小等等

**-prune**

不对匹配到的目录进行进一步搜索，即不会进入该目录进行搜索

注意，在使用 `-prune` 选项时，必须使用 `-o` 选项来指定或的关系，以便 `find` 命令能够搜索其他目录或文件

```
# 列如，在 /home 目录下搜索所有扩展名为 .txt 的文件，但不想搜索 /home/user1 目录
# -path /home/user1 -prune 选项用于排除 /home/user1 目录，-o 选项用于指定或的关系
# -name "*.txt" -print 选项用于搜索扩展名为 .txt 的文件并输出它们的路径
find /home -path /home/user1 -prune -o -name "*.txt" -print
```

**-quit**

在第一次匹配到文件或目录后，停止搜索

**-ls**

类似于`ls -l`命令的输出格式，输出匹配到的文件或目录的详细信息
